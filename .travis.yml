language: node_js
node_js: '8'

cache:
  directories:
    - node_modules
env:
  matrix:
  - PROVIDER=amazon
  - PROVIDER=azure
before_install:
- rm -rf node_modules && npm install
- npm update -g
- npm install -g serverless
script:
- cp -R functions $PROVIDER/
- cd $PROVIDER
- npm i
- sls deploy
